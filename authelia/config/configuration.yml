theme: auto

server:
  address: "tcp://0.0.0.0:9091"
  endpoints:
    authz:
      forward-auth:
        implementation: 'ForwardAuth'
        authn_strategies:
          - name: 'HeaderProxyAuthorization'
            schemes:
              - 'Basic'
          - name: 'CookieSession'

session:
  name: authelia_session
  secret: '{{ mustEnv "SESSION_SECRET" }}'
  expiration: 1h
  inactivity: 15m
  cookies:
    - domain: '{{ mustEnv "DOMAIN_NAME" }}'
      authelia_url: 'https://auth.{{ mustEnv "DOMAIN_NAME" }}'

storage:
  local:
    path: /config/db.sqlite3
  encryption_key: '{{ mustEnv "STORAGE_ENCRYPTION_KEY" }}'

identity_validation:
  reset_password:
    jwt_secret: '{{ mustEnv "JWT_SECRET" }}'

authentication_backend:
  file:
    path: /config/users.yaml
    password:
      algorithm: argon2

access_control:
  default_policy: deny
  rules:
    - domain: 'n8n.{{ mustEnv "DOMAIN_NAME" }}'
      policy: one_factor

notifier:
  # Uncomment this if you want to use the filesystem notifier
  # filesystem:
    # filename: /config/notification.txt
  disable_startup_check: false
  smtp:
    address: 'smtp.gmail.com:587'
    username: '{{ mustEnv "SMTP_USERNAME" }}'
    password: '{{ mustEnv "SMTP_PASSWORD" }}'
    sender: '{{ mustEnv "SMTP_USERNAME" }}'
    subject: "[Authelia] {title}"
    startup_check_address: '{{ mustEnv "SMTP_USERNAME" }}'
    disable_require_tls: false
    disable_starttls: false
    disable_html_emails: false
    tls:
      server_name: 'smtp.gmail.com'
      skip_verify: false
      minimum_version: TLS1.2